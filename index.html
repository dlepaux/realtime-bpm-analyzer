<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Realtime BPM Analyzer Documentation</title><meta name="description" content="Documentation for Realtime BPM Analyzer"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><link rel="stylesheet" href="assets/custom.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><link rel="icon" type="image/x-icon" href="/favicons/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png">
<link rel="manifest" href="/favicons/manifest.webmanifest">
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#fff">
<meta name="application-name">
<link rel="apple-touch-icon" sizes="57x57" href="/favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="167x167" href="/favicons/apple-touch-icon-167x167.png">
<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon-180x180.png">
<link rel="apple-touch-icon" sizes="1024x1024" href="/favicons/apple-touch-icon-1024x1024.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title">
<link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-640x1136.png">
<link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-1136x640.png">
<link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-750x1334.png">
<link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-1334x750.png">
<link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-1125x2436.png">
<link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2436x1125.png">
<link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-1170x2532.png">
<link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2532x1170.png">
<link rel="apple-touch-startup-image" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-1179x2556.png">
<link rel="apple-touch-startup-image" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2556x1179.png">
<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-828x1792.png">
<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-1792x828.png">
<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-1242x2688.png">
<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2688x1242.png">
<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-1242x2208.png">
<link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2208x1242.png">
<link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-1284x2778.png">
<link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2778x1284.png">
<link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-1290x2796.png">
<link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2796x1290.png">
<link rel="apple-touch-startup-image" media="(device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-1488x2266.png">
<link rel="apple-touch-startup-image" media="(device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2266x1488.png">
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-1536x2048.png">
<link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2048x1536.png">
<link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-1620x2160.png">
<link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2160x1620.png">
<link rel="apple-touch-startup-image" media="(device-width: 820px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-1640x2160.png">
<link rel="apple-touch-startup-image" media="(device-width: 820px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2160x1640.png">
<link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-1668x2388.png">
<link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2388x1668.png">
<link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-1668x2224.png">
<link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2224x1668.png">
<link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/favicons/apple-touch-startup-image-2048x2732.png">
<link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/favicons/apple-touch-startup-image-2732x2048.png">
<meta name="msapplication-TileColor" content="#fff">
<meta name="msapplication-TileImage" content="/favicons/mstile-144x144.png">
<meta name="msapplication-config" content="/favicons/browserconfig.xml">
<link rel="yandex-tableau-widget" href="/favicons/yandex-browser-manifest.json"></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"><a href="http://github.com/dlepaux/realtime-bpm-analyzer">Github</a><a href="http://www.allegro-project.com">Examples</a></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Realtime BPM Analyzer</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>Realtime BPM Analyzer</h2></div><div class="tsd-panel tsd-typography"><a id="md:realtime-bpm-analyzer" class="tsd-anchor"></a><h1><a href="#md:realtime-bpm-analyzer">Realtime BPM Analyzer</a></h1><p><a href="https://github.com/xojs/xo"><img src="https://img.shields.io/badge/code_style-XO-5ed9c7.svg" alt="XO code style"></a>
<a href="https://www.npmjs.com/package/realtime-bpm-analyzer"><img src="https://img.shields.io/npm/dm/realtime-bpm-analyzer.svg" alt="npm"></a>
<a href="https://github.com/dlepaux/realtime-bpm-analyzer/blob/master/licence.md"><img src="https://img.shields.io/npm/l/realtime-bpm-analyzer.svg" alt="npm"></a>
<a href="https://github.com/dlepaux/realtime-bpm-analyzer/actions"><img src="https://github.com/dlepaux/realtime-bpm-analyzer/workflows/CI/badge.svg" alt="CI Actions Status"></a>
<a href="https://codecov.io/gh/dlepaux/realtime-bpm-analyzer"><img src="https://codecov.io/gh/dlepaux/realtime-bpm-analyzer/branch/main/graph/badge.svg" alt="codecov"></a>
<a href="https://gitter.im/realtime-bpm-analyzer/Lobby?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge"><img src="https://badges.gitter.im/realtime-bpm-analyzer/Lobby.svg" alt="Join the chat at https://gitter.im/realtime-bpm-analyzer/Lobby"></a></p>
<div>
  <p align="center">
    <img src="https://www.realtime-bpm-analyzer.com/realtime-bpm-analyzer-share.png" style="width: 100%; height: auto;">
  </p>
</div>

<p>Welcome to Realtime BPM Analyzer, a powerful and easy-to-use TypeScript/JavaScript library for detecting the beats-per-minute (BPM) of an audio or video source in real-time.</p>
<ul>
<li><a href="#md:realtime-bpm-analyzer">Realtime BPM Analyzer</a><ul>
<li><a href="#md:getting-started">Getting started</a></li>
<li><a href="#md:features">Features</a></li>
<li><a href="#md:usages">Usages</a><ul>
<li><a href="#md:player-strategy">Player strategy</a></li>
<li><a href="#md:continuous-analysis-strategy">Continuous Analysis strategy</a></li>
<li><a href="#md:localoffline-strategy">Local/Offline strategy</a></li>
</ul>
</li>
<li><a href="#md:development">Development</a><ul>
<li><a href="#md:unit-tests">Unit Tests</a></li>
<li><a href="#md:dataset-testing">Dataset Testing</a></li>
<li><a href="#md:new-features">New features</a></li>
<li><a href="#md:technical-documentation">Technical Documentation</a></li>
</ul>
</li>
<li><a href="#md:commercial-usage">Commercial Usage</a></li>
<li><a href="#md:roadmap">Roadmap</a></li>
<li><a href="#md:credits">Credits</a></li>
</ul>
</li>
</ul>
<a id="md:getting-started" class="tsd-anchor"></a><h2><a href="#md:getting-started">Getting started</a></h2><p>To install this module to your project, just launch the command below:</p>
<pre><code class="language-bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">realtime-bpm-analyzer</span>
</code><button>Copy</button></pre>
<p>To learn more about how to use the library, you can check out <a href="https://www.realtime-bpm-analyzer.com">the documentation</a>.</p>
<a id="md:features" class="tsd-anchor"></a><h2><a href="#md:features">Features</a></h2><ul>
<li><strong>Dependency-free</strong> library that utilizes the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API">Web Audio API</a> to analyze audio or video sources and provide accurate BPM detection.</li>
<li>Can be used to analyze <strong>audio or video</strong> nodes, streams as well as <strong>files</strong>.</li>
<li>Allows you to compute the BPM while the audio or video is playing.</li>
<li>Lightweight and easy to use, making it a great option for web-based music production and DJing applications.</li>
<li>Supports MP3, FLAC and WAV formats.</li>
</ul>
<a id="md:usages" class="tsd-anchor"></a><h2><a href="#md:usages">Usages</a></h2><p>If you encounter issues along the way, remember I have a <a href="https://gitter.im/realtime-bpm-analyzer/Lobby">chat</a> and the new <a href="https://github.com/dlepaux/realtime-bpm-analyzer/discussions">discussion feature of github</a> !</p>
<a id="md:player-strategy" class="tsd-anchor"></a><h3><a href="#md:player-strategy">Player strategy</a></h3><p>Measure or detect the BPM from a web <strong>player</strong>.</p>
<p>This example shows how to deal with a simple <code>audio</code> node.</p>
<ol>
<li>An <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioNode">AudioNode</a> to analyze. So something like this:</li>
</ol>
<pre><code class="language-html"><span class="hl-3">&lt;</span><span class="hl-4">audio</span><span class="hl-1"> </span><span class="hl-5">src</span><span class="hl-1">=</span><span class="hl-6">&quot;./new_order-blue_monday.mp3&quot;</span><span class="hl-1"> </span><span class="hl-5">id</span><span class="hl-1">=</span><span class="hl-6">&quot;track&quot;</span><span class="hl-3">&gt;&lt;/</span><span class="hl-4">audio</span><span class="hl-3">&gt;</span>
</code><button>Copy</button></pre>
<ol start="2">
<li>Create the AudioWorkletProcessor with <code>createRealTimeBpmProcessor</code>, create and pipe the filters to the AudioWorkletNode (<code>realtimeAnalyzerNode</code>).</li>
</ol>
<pre><code class="language-javascript"><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-8">createRealTimeBpmProcessor</span><span class="hl-1">, </span><span class="hl-8">getBiquadFilter</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;realtime-bpm-analyzer&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">realtimeAnalyzerNode</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">createRealTimeBpmProcessor</span><span class="hl-1">(</span><span class="hl-8">audioContext</span><span class="hl-1">);</span><br/><br/><span class="hl-11">// Set the source with the HTML Audio Node</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">track</span><span class="hl-1"> = </span><span class="hl-8">document</span><span class="hl-1">.</span><span class="hl-0">getElementById</span><span class="hl-1">(</span><span class="hl-2">&#39;track&#39;</span><span class="hl-1">);</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">source</span><span class="hl-1"> = </span><span class="hl-8">audioContext</span><span class="hl-1">.</span><span class="hl-0">createMediaElementSource</span><span class="hl-1">(</span><span class="hl-8">track</span><span class="hl-1">);</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">lowpass</span><span class="hl-1"> = </span><span class="hl-0">getBiquadFilter</span><span class="hl-1">(</span><span class="hl-8">audioContext</span><span class="hl-1">);</span><br/><br/><span class="hl-11">// Connect nodes together</span><br/><span class="hl-8">source</span><span class="hl-1">.</span><span class="hl-0">connect</span><span class="hl-1">(</span><span class="hl-8">lowpass</span><span class="hl-1">).</span><span class="hl-0">connect</span><span class="hl-1">(</span><span class="hl-8">realtimeAnalyzerNode</span><span class="hl-1">);</span><br/><span class="hl-8">source</span><span class="hl-1">.</span><span class="hl-0">connect</span><span class="hl-1">(</span><span class="hl-8">audioContext</span><span class="hl-1">.</span><span class="hl-8">destination</span><span class="hl-1">);</span><br/><br/><span class="hl-8">realtimeAnalyzerNode</span><span class="hl-1">.</span><span class="hl-8">port</span><span class="hl-1">.</span><span class="hl-0">onmessage</span><span class="hl-1"> = (</span><span class="hl-8">event</span><span class="hl-1">) </span><span class="hl-9">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-8">event</span><span class="hl-1">.</span><span class="hl-8">data</span><span class="hl-1">.</span><span class="hl-8">message</span><span class="hl-1"> === </span><span class="hl-2">&#39;BPM&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-8">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;BPM&#39;</span><span class="hl-1">, </span><span class="hl-8">event</span><span class="hl-1">.</span><span class="hl-8">data</span><span class="hl-1">.</span><span class="hl-8">data</span><span class="hl-1">.</span><span class="hl-8">bpm</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-8">event</span><span class="hl-1">.</span><span class="hl-8">data</span><span class="hl-1">.</span><span class="hl-8">message</span><span class="hl-1"> === </span><span class="hl-2">&#39;BPM_STABLE&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-8">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;BPM_STABLE&#39;</span><span class="hl-1">, </span><span class="hl-8">event</span><span class="hl-1">.</span><span class="hl-8">data</span><span class="hl-1">.</span><span class="hl-8">data</span><span class="hl-1">.</span><span class="hl-8">bpm</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span>
</code><button>Copy</button></pre>
<a id="md:continuous-analysis-strategy" class="tsd-anchor"></a><h3><a href="#md:continuous-analysis-strategy">Continuous Analysis strategy</a></h3><p>Analyze the BPM of a source continuously. This feature is quite simple and basically get rid of all data inside the analyzer after the stabilizationTime is reached. Why ? Because we store all the &quot;valid peaks&quot; for each thresholds in order to find the best candidates. And we would keep all those data forever, we would have memory leaks.</p>
<p>Note: This approach is <strong>NOT recommended</strong> if you are using a microphone as source. Except if the microphone gets correct audio source. Typically, if the BPM is never computed using this approach, you probably capture low intensity audio with your microphone (too far from the source, too much noise, directional microphone could be reasons why it&#39;s not working).</p>
<ol>
<li>Streams can be played with <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioNode">AudioNode</a>, so the approach is quite similar to the <a href="#md:player-strategy">Player strategy</a>.</li>
</ol>
<pre><code class="language-html"><span class="hl-3">&lt;</span><span class="hl-4">audio</span><span class="hl-1"> </span><span class="hl-5">src</span><span class="hl-1">=</span><span class="hl-6">&quot;https://ssl1.viastreaming.net:7005/;listen.mp3&quot;</span><span class="hl-1"> </span><span class="hl-5">id</span><span class="hl-1">=</span><span class="hl-6">&quot;track&quot;</span><span class="hl-3">&gt;&lt;/</span><span class="hl-4">audio</span><span class="hl-3">&gt;</span>
</code><button>Copy</button></pre>
<p>Thank you <a href="http://ibizasonica.com">IbizaSonica</a> for the stream.</p>
<ol start="2">
<li>As for the <a href="#md:player-strategy">Player strategy</a>, except that we need to turn on the <code>continuousAnalysis</code> flag to periodically delete collected data.</li>
</ol>
<pre><code class="language-javascript"><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-8">createRealTimeBpmProcessor</span><span class="hl-1">, </span><span class="hl-8">getBiquadFilter</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;realtime-bpm-analyzer&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">realtimeAnalyzerNode</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">createRealTimeBpmProcessor</span><span class="hl-1">(</span><span class="hl-8">audioContext</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-8">continuousAnalysis:</span><span class="hl-1"> </span><span class="hl-9">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-8">stabilizationTime:</span><span class="hl-1"> </span><span class="hl-12">20_000</span><span class="hl-1">, </span><span class="hl-11">// Default value is 20_000ms after what the library will automatically delete all collected data and restart analyzing BPM</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-11">// Set the source with the HTML Audio Node</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">track</span><span class="hl-1"> = </span><span class="hl-8">document</span><span class="hl-1">.</span><span class="hl-0">getElementById</span><span class="hl-1">(</span><span class="hl-2">&#39;track&#39;</span><span class="hl-1">);</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">source</span><span class="hl-1"> = </span><span class="hl-8">audioContext</span><span class="hl-1">.</span><span class="hl-0">createMediaElementSource</span><span class="hl-1">(</span><span class="hl-8">track</span><span class="hl-1">);</span><br/><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">lowpass</span><span class="hl-1"> = </span><span class="hl-0">getBiquadFilter</span><span class="hl-1">(</span><span class="hl-8">audioContext</span><span class="hl-1">);</span><br/><br/><span class="hl-11">// Connect nodes together</span><br/><span class="hl-8">source</span><span class="hl-1">.</span><span class="hl-0">connect</span><span class="hl-1">(</span><span class="hl-8">lowpass</span><span class="hl-1">).</span><span class="hl-0">connect</span><span class="hl-1">(</span><span class="hl-8">realtimeAnalyzerNode</span><span class="hl-1">);</span><br/><span class="hl-8">source</span><span class="hl-1">.</span><span class="hl-0">connect</span><span class="hl-1">(</span><span class="hl-8">audioContext</span><span class="hl-1">.</span><span class="hl-8">destination</span><span class="hl-1">);</span><br/><br/><span class="hl-8">realtimeAnalyzerNode</span><span class="hl-1">.</span><span class="hl-8">port</span><span class="hl-1">.</span><span class="hl-0">onmessage</span><span class="hl-1"> = (</span><span class="hl-8">event</span><span class="hl-1">) </span><span class="hl-9">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-8">event</span><span class="hl-1">.</span><span class="hl-8">data</span><span class="hl-1">.</span><span class="hl-8">message</span><span class="hl-1"> === </span><span class="hl-2">&#39;BPM&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-8">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;BPM&#39;</span><span class="hl-1">, </span><span class="hl-8">event</span><span class="hl-1">.</span><span class="hl-8">data</span><span class="hl-1">.</span><span class="hl-8">data</span><span class="hl-1">.</span><span class="hl-8">bpm</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-8">event</span><span class="hl-1">.</span><span class="hl-8">data</span><span class="hl-1">.</span><span class="hl-8">message</span><span class="hl-1"> === </span><span class="hl-2">&#39;BPM_STABLE&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-8">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;BPM_STABLE&#39;</span><span class="hl-1">, </span><span class="hl-8">event</span><span class="hl-1">.</span><span class="hl-8">data</span><span class="hl-1">.</span><span class="hl-8">data</span><span class="hl-1">.</span><span class="hl-8">bpm</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span>
</code><button>Copy</button></pre>
<a id="md:localoffline-strategy" class="tsd-anchor"></a><h3><a href="#md:localoffline-strategy">Local/Offline strategy</a></h3><p>Analyze the BPM from <strong>files</strong> located on your <strong>desktop, tablet or mobile</strong>!</p>
<ol>
<li>Import the library</li>
</ol>
<pre><code class="language-javascript"><span class="hl-7">import</span><span class="hl-1"> </span><span class="hl-9">*</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-8">realtimeBpm</span><span class="hl-1"> </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;realtime-bpm-analyzer&#39;</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<ol start="2">
<li>Use an <code>input[type=file]</code> to get the files you want.</li>
</ol>
<pre><code class="language-jsx"><span class="hl-3">&lt;</span><span class="hl-4">input</span><span class="hl-1"> </span><span class="hl-5">type</span><span class="hl-1">=</span><span class="hl-2">&quot;file&quot;</span><span class="hl-1"> </span><span class="hl-5">accept</span><span class="hl-1">=</span><span class="hl-2">&quot;wav,mp3,flac&quot;</span><span class="hl-1"> </span><span class="hl-5">onChange</span><span class="hl-1">=</span><span class="hl-9">{</span><span class="hl-8">event</span><span class="hl-13"> </span><span class="hl-9">=&gt;</span><span class="hl-13"> </span><span class="hl-9">this</span><span class="hl-13">.</span><span class="hl-0">onFileChange</span><span class="hl-13">(</span><span class="hl-8">event</span><span class="hl-13">)</span><span class="hl-9">}</span><span class="hl-3">/&gt;</span>
</code><button>Copy</button></pre>
<ol start="3">
<li>You can listen to the <code>change</code> event like so, and analyze the BPM of the selected files. You don&#39;t need to be connected to the Internet for this to work.</li>
</ol>
<pre><code class="language-javascript"><span class="hl-9">function</span><span class="hl-1"> </span><span class="hl-0">onFileChange</span><span class="hl-1">(</span><span class="hl-8">event</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">audioContext</span><span class="hl-1"> = </span><span class="hl-9">new</span><span class="hl-1"> </span><span class="hl-0">AudioContext</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-11">// Get the first file from the list</span><br/><span class="hl-1">  </span><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">file</span><span class="hl-1"> = </span><span class="hl-8">event</span><span class="hl-1">.</span><span class="hl-8">target</span><span class="hl-1">.</span><span class="hl-8">files</span><span class="hl-1">[</span><span class="hl-12">0</span><span class="hl-1">];</span><br/><span class="hl-1">  </span><span class="hl-9">const</span><span class="hl-1"> </span><span class="hl-10">reader</span><span class="hl-1"> = </span><span class="hl-9">new</span><span class="hl-1"> </span><span class="hl-0">FileReader</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-8">reader</span><span class="hl-1">.</span><span class="hl-0">addEventListener</span><span class="hl-1">(</span><span class="hl-2">&#39;load&#39;</span><span class="hl-1">, () </span><span class="hl-9">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-11">// The file is uploaded, now we decode it</span><br/><span class="hl-1">    </span><span class="hl-8">audioContext</span><span class="hl-1">.</span><span class="hl-0">decodeAudioData</span><span class="hl-1">(</span><span class="hl-8">reader</span><span class="hl-1">.</span><span class="hl-8">result</span><span class="hl-1">, </span><span class="hl-8">audioBuffer</span><span class="hl-1"> </span><span class="hl-9">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-11">// The result is passed to the analyzer</span><br/><span class="hl-1">      </span><span class="hl-8">realtimeBpm</span><span class="hl-1">.</span><span class="hl-0">analyzeFullBuffer</span><span class="hl-1">(</span><span class="hl-8">audioBuffer</span><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">(</span><span class="hl-8">topCandidates</span><span class="hl-1"> </span><span class="hl-9">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-11">// Do something with the BPM</span><br/><span class="hl-1">        </span><span class="hl-8">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;topCandidates&#39;</span><span class="hl-1">, </span><span class="hl-8">topCandidates</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><span class="hl-8">reader</span><span class="hl-1">.</span><span class="hl-0">readAsArrayBuffer</span><span class="hl-1">(</span><span class="hl-8">file</span><span class="hl-1">);</span><br/><span class="hl-1">};</span>
</code><button>Copy</button></pre>
<a id="md:development" class="tsd-anchor"></a><h2><a href="#md:development">Development</a></h2><p>Realtime BPM Analyzer is using <a href="https://modern-web.dev/docs/test-runner/overview/">Web Test Runner</a> to handle <strong>Unit tests</strong> and <a href="https://modern-web.dev/docs/dev-server/overview/">Web Dev Server</a> to handle <strong>Dataset testing</strong>.</p>
<p>You will first need to install the project following these commands:</p>
<pre><code class="language-bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">prepare</span>
</code><button>Copy</button></pre>
<a id="md:unit-tests" class="tsd-anchor"></a><h3><a href="#md:unit-tests">Unit Tests</a></h3><p>To run the unit tests, you just have to run <code>npm test</code>.</p>
<a id="md:dataset-testing" class="tsd-anchor"></a><h3><a href="#md:dataset-testing">Dataset Testing</a></h3><p>To test a whole dataset of audio files you have to drop those files into <code>testing/datasets</code> and then run: <code>npm run testing:prepare</code> to create a manifest that contains the file name and the BPM (typically the verified one) from the metadata.</p>
<pre><code class="language-json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-14">&quot;my music file.mp3&quot;</span><span class="hl-1">: </span><span class="hl-12">130</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<p>You also need to build the library with <code>npm run build</code>.</p>
<p>Once those steps are done you can run <code>npm run testing</code> to challenge the library against your dataset. The <a href="#md:localoffline-strategy">Local/Offline strategy</a> is used here.</p>
<a id="md:new-features" class="tsd-anchor"></a><h3><a href="#md:new-features">New features</a></h3><p>If you&#39;re developing a new feature and you want to test it in another project, you can run <code>bin/build/to-project.sh nameOfTheProject</code>. This command will create package with <code>npm pack</code> and copy it into the target project <code>nameOfTheProject</code> sitting next to this one. You will then be able to test a production-like package.</p>
<a id="md:technical-documentation" class="tsd-anchor"></a><h3><a href="#md:technical-documentation">Technical Documentation</a></h3><p><a href="https://www.npmjs.com/package/typedoc">TypeDoc</a> is used to build the technical documentation of Realtime BPM Analyzer. To build the documentation run: <code>npm run build:docs</code>;</p>
<a id="md:commercial-usage" class="tsd-anchor"></a><h2><a href="#md:commercial-usage">Commercial Usage</a></h2><p>This library is distributed under the terms of the Apache License, Version 2.0. However, if you are interested in using this library in a commercial context or require a commercial license, please feel free to contact me.</p>
<p>For inquiries regarding commercial usage, licensing options, or any other questions, please contact me:</p>
<pre><code><span class="hl-8">David</span><span class="hl-1"> </span><span class="hl-8">Lepaux</span><br/><span class="hl-8">d</span><span class="hl-1">.</span><span class="hl-8">lepaux</span><span class="hl-1">@</span><span class="hl-8">gmail</span><span class="hl-1">.</span><span class="hl-8">com</span>
</code><button>Copy</button></pre>
<p>I am open to discussing custom licensing arrangements to meet your specific needs and ensure that you can use this library in your commercial projects with confidence.</p>
<a id="md:roadmap" class="tsd-anchor"></a><h2><a href="#md:roadmap">Roadmap</a></h2><ul>
<li><input disabled="" type="checkbox"> Add confidence level of Tempo</li>
<li><input disabled="" type="checkbox"> Combine Amplitude Thresholding strategy with others to improve BPM accuracy</li>
<li><input disabled="" type="checkbox"> Improve the continuous analysis in order to ignore drops and cuts</li>
<li><input disabled="" type="checkbox"> Monitor memory usage</li>
</ul>
<p>Let me know what your most wanted feature is by opening <a href="https://github.com/dlepaux/realtime-bpm-analyzer/issues">an issue</a>.</p>
<a id="md:credits" class="tsd-anchor"></a><h2><a href="#md:credits">Credits</a></h2><p>This library was inspired by the <a href="https://github.com/tornqvist/bpm-detective">Tornqvist project</a>, which was also based on <a href="http://joesul.li/van/beat-detection-using-web-audio/">Joe Sullivan&#39;s algorithm</a>. Thank you to both of them.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:realtime-bpm-analyzer"><span>Realtime BPM <wbr/>Analyzer</span></a><ul><li><a href="#md:getting-started"><span>Getting started</span></a></li><li><a href="#md:features"><span>Features</span></a></li><li><a href="#md:usages"><span>Usages</span></a></li><li><ul><li><a href="#md:player-strategy"><span>Player strategy</span></a></li><li><a href="#md:continuous-analysis-strategy"><span>Continuous <wbr/>Analysis strategy</span></a></li><li><a href="#md:localoffline-strategy"><span>Local/<wbr/>Offline strategy</span></a></li></ul></li><li><a href="#md:development"><span>Development</span></a></li><li><ul><li><a href="#md:unit-tests"><span>Unit <wbr/>Tests</span></a></li><li><a href="#md:dataset-testing"><span>Dataset <wbr/>Testing</span></a></li><li><a href="#md:new-features"><span>New features</span></a></li><li><a href="#md:technical-documentation"><span>Technical <wbr/>Documentation</span></a></li></ul></li><li><a href="#md:commercial-usage"><span>Commercial <wbr/>Usage</span></a></li><li><a href="#md:roadmap"><span>Roadmap</span></a></li><li><a href="#md:credits"><span>Credits</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>Realtime BPM Analyzer</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><div class="overlay"></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-S911G9WQTM"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-S911G9WQTM');</script></body></html>